apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
  namespace: batchivo-staging
data:
  # Database - uses batchivo_staging database in shared PostgreSQL
  DB_HOST: "postgres.batchivo.svc.cluster.local"
  DB_PORT: "5432"
  DB_NAME: "batchivo_staging"
  # Redis - shared with production (different key prefix via app)
  REDIS_URL: "redis://redis.batchivo.svc.cluster.local:6379/1"
  # Environment
  ENVIRONMENT: "staging"
  LOG_LEVEL: "DEBUG"
  ENABLE_TRACING: "false"
  ACCESS_TOKEN_EXPIRE_MINUTES: "1440"
  # CORS - staging domains
  CORS_ORIGINS: '["https://staging.batchivo.com", "https://staging.mystmereforge.co.uk"]'
  # S3/MinIO storage - separate bucket for staging
  STORAGE_TYPE: "s3"
  STORAGE_S3_BUCKET: "batchivo-staging-images"
  STORAGE_S3_REGION: "us-east-1"
  STORAGE_S3_ENDPOINT: "http://minio.batchivo.svc.cluster.local:9000"
  # Row-Level Security
  RLS_ENABLED: "false"
